<!DOCTYPE html>
<html lang="en-US" dir="ltr">

  <head>
    <title>SolsticeClan Members</title>
    <meta name="description" content="Sinister Haven: SolsticeClan character descriptions and images">
    <meta name="author" content="Kristy Thompson, Jessica Teichman">
    <meta charset="UTF-8">
    <link href="solsticeclan_members.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=News+Cycle&family=Splash&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:wght@100&display=swap" rel="stylesheet">
    
    <div id="hiddenelement" style="display: none;"></div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>


<body>
  </head>
  <div class="background">
    <header>
      <h1> SolsticeClan </h1>
      <div class="vector-img"></div>
    </header>
    <div class="character-submission-section">
      <nav>
        <button rel="noopener" onclick="openInNewTab('http://sinisterhaven.com/index.php?act=Pages&pid=17');"> Information</button>
        <button rel="noopener" onclick="openInNewTab('http://sinisterhaven.com/index.php?act=Pages&pid=16');"> Members </button>
        <button rel="noopener" onclick="openInNewTab('http://sinisterhaven.com/index.php?act=Pages&pid=4');"> Character Creation</button>
        <button rel="noopener" onclick="openInNewTab('http://sinisterhaven.com/index.php?act=Pages&pid=18');"> Territory </button>
        <button rel="noopener" onclick="openInNewTab('http://sinisterhaven.com/index.php?showforum=12');"> Forum</button>
      </nav>
      <div class="submission-flexbox">
        <section class="character-submission-container">
          <h2> Character Submissions </h2>
          <div class="form-container">
            <form name="SolsticeClanJoining">
              <div class="form-container-inner">
                <fieldset>
                  <label for="CharacterName">Character Name
                    <input type="text" name="Character Name" id="CharacterName" required>
                  </label>
                  <label for="RoleplayerUsername">Username
                    <input type="text" name="Roleplayer Username" id="RoleplayerUsername" required>
                  </label>
                  <br>
                  <label for="PhysicalDescription" style="grid-column: span 2;"> Physical Description <br>
                    <textarea name="Physical Description (one sentence long)" id="PhysicalDescription" placeholder="one sentence minimum" required>
                           </textarea>
                  </label>
                  <label for="Traits">Personality Traits
                    <input type="text" name="Traits (List 3 in this format: One -- Two -- Three)" id="Traits" placeholder="One -- Two -- Three" required>
                  </label>
                  <label for="CharacterImage">Character Image (url)
                    <input type="url" name="Character Image" id="CharacterImage" required>
                  </label>
                </fieldset>
                <fieldset>
                  <label for="Rank">
                    Rank <br>
                    <select name="Rank" id="Rank">
                      <optgroup>
                        <option value="Sun Warrior" selected> Sun Warrior </option>
                        <option value="Moon Warrior"> Moon Warrior </option>
                        <option value="Apprentice"> Apprentice </option>
                        <option value="Elder"> Elder </option>
                      </optgroup>
                    </select>
                  </label>
                  <label for="Zodiac">
                    Zodiac Sign <br>
                    <select name="Zodiac Sign" id="Zodiac">
                      <optgroup>
                        <option value="♈ Aries (Ram): March 21–April 19" selected>♈ Aries (Ram): March 21–April 19</option>
                        <option value="♉ Taurus (Bull): April 20–May 20">♉ Taurus (Bull): April 20–May 20</option>
                        <option value="♊ Gemini (Twins): May 21–June 21">♊ Gemini (Twins): May 21–June 21</option>
                        <option value="♋ Cancer (Crab): June 22–July 22">♋ Cancer (Crab): June 22–July 22</option>
                        <option value="♌ Leo (Lion): July 23–August 22">♌ Leo (Lion): July 23–August 22</option>
                        <option value="♍ Virgo (Virgin): August 23–September 22">♍ Virgo (Virgin): August 23–September 22</option>
                        <option value="♎ Libra (Balance): September 23–October 23">♎ Libra (Balance): September 23–October 23</option>
                        <option value="♏ Scorpius (Scorpion): October 24–November 21">♏ Scorpius (Scorpion): October 24–November 21</option>
                        <option value="♐ Sagittarius (Archer): November 22–December 21">♐ Sagittarius (Archer): November 22–December 21</option>
                        <option value="♑ Capricornus (Goat): December 22–January 19">♑ Capricornus (Goat): December 22–January 19</option>
                        <option value="♒ Aquarius (Water Bearer): January 20–February 18">♒ Aquarius (Water Bearer): January 20–February 18</option>
                        <option value="♓ Pisces (Fish): February 19–March 20">♓ Pisces (Fish): February 19–March 20</option>
                      </optgroup>
                    </select>
                  </label>
                  <select name="Status" style="display:none;">
                    <option value="Pending" selected> Pending </option>
                  </select>
                  <label for="parentOne">
                    Mother's Blood Type <br>
                    <select id="parentOne" name="parentOne">
                      <optgroup>
                        <option value="Unknown" selected>Unknown</option>
                        <option value="Diamond">Diamond</option>
                        <option value="Emerald">Emerald</option>
                        <option value="Amethyst">Amethyst</option>
                        <option value="Amber">Amber</option>
                      </optgroup>
                    </select>
                  </label>
                  <label for="parentTwo">
                    Father's Blood Type <br>
                    <select id="parentTwo" name="parentTwo">
                      <optgroup>
                        <option value="Unknown" selected>Unknown</option>
                        <option value="Diamond">Diamond</option>
                        <option value="Emerald">Emerald</option>
                        <option value="Amethyst">Amethyst</option>
                        <option value="Amber">Amber</option>
                      </optgroup>
                    </select>
                  </label>
                  <label style="display:none;"> BLOOD
                    <input type="text" name="blood1type" id="blood1type" required readonly>
                  </label>
                  <label for="Powers">
                    Powers <br>
                    <select name="Powers" id="Powers">
                      <optgroup>
                        <option value="None" selected>None</option>
                        <option value="Power1">Power1</option>
                        <option value="Power2">Power2</option>
                        <option value="Power3">Power3</option>
                        <option value="Power4">Power4</option>
                        <option value="Power5">Power5</option>
                      </optgroup>
                    </select>
                  </label>
                  <label style="display:none;">
                    Hybrid
                    <select name="Hybrid">
                      <optgroup>
                        <option value="Domestic Cat" selected>Domestic Cat</option>
                      </optgroup>
                    </select>
                  </label>
                  <label for="Malady">
                    Malady <br>
                    <select name="Malady" id="Malady">
                      <optgroup>
                        <option value="None" selected>None</option>
                        <option value="Malady1">Malady1</option>
                        <option value="Malady2">Malady2</option>
                        <option value="Malady3">Malady3</option>
                        <option value="Malady4">Malady4</option>
                        <option value="Malady5">Malady5</option>
                      </optgroup>
                    </select>
                  </label>
                </fieldset>
                <div class="button-section">
                  <img alt="butterfly" style="margin-left:15%;margin-bottom:-2rem;position:absolute; z-index:2;" src="https://www.animatedimages.org/data/media/291/animated-butterfly-image-0115.gif"><input type="submit" name="Sign Up">
                </div>
              </div>
            </form>
          </div>
          <br>
        </section>
        <br>
        <aside class="character-submission-info">
          <h3>Keep in mind...</h3>
          <p>Common Fur Colors:<i> put common fur colors here</i></p>
          <p>Common Eye Colors:<i> put common eye colors here</i></p>
          <p>Common Powers: <i>put common powers here</i></p>
          <p>SolsticeClan Positive Traits: <br>
            <i>Devout >> Spiritual >> Studious</i>
          </p>
          <p>SolsticeClan Neutral Traits: <br>
            <i>Prideful >> Artistic >> Charismatic</i>
          </p>
          <p>SolsticeClan Negative Traits: <br>
            <i>Argumenative >> Arrogant >> Manipulative</i>
          </p>
        </aside>
      </div>
    </div>
    <div class="divider-img"></div>
    <div class="character-section">
      <br>
      <div class="character-views">
        <button class="viewlinks" onclick="openView(event, 'gallery')" > Gallery </button>
        <button class="viewlinks" onclick="openView(event, 'allegiances')" id="defaultOpen"> Allegiances </button>
        <button class="viewlinks" onclick="openView(event, 'archive')"> Archive </button>
        <button class="viewlinks" onclick="openView(event, 'ranks')"> Ranks</button>
        <button class="viewlinks" onclick="openView(event, 'sol-statistics')"> Statistics </button>
      </div>
      <div class="character-section-containter">
        <div class="character-container">
          <h3 id="current-character-name">Name</h3>
          Roleplayed by <span id="current-character-username"> Username </span><br>
          <div id="current-character"></div>
          <br>
          <span id="current-character-traits">Trait 1 --- Trait 2 --- Trait 3 ---</span>
          <p class="current-character-bio" id="current-character-bio">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            quis nostrud exercitation
            laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
          </p>
          <div class="current-character-flexbox">
            <span id="current-character-rank">Clan Rank</span>
            <span id="current-character-bloodtype">Blood Type</span>
            <span id="current-character-powers">Power</span>
          </div>
        </div>
        <div class="character-list-all">
          <input type="text" id="username1" class="username-search" placeholder="search characters by username"><button id="filter" onclick="submituser()">
            <img class="sorting-img" alt="username search" src="https://media.discordapp.net/attachments/746552826070564865/1011719440787841094/unknown.png">
          </button>
          <div class="character-list-container">
            <div id="gallery" class="viewcharacters" style="display:none;">
              <div class="gallery-image-grid" id="scgallery">
                <div class="gallery-images"></div>
                <div class="gallery-images"></div>
                <div class="gallery-images"></div>
                <div class="gallery-images"></div>
                <div class="gallery-images"></div>
                <div class="gallery-images"></div>
              </div>
            </div>
            <div id="allegiances" class="viewcharacters">
              <div id="currentchars">
                <span class= "sol-title-small"> Priests</span> <br>
                <div class="priest" id="priest">Priests are loading -- please be patient</div>
                <span class= "sol-title-small"> Sun Warriors</span><br>
                <div class="sun-warriors" id="scsuns">Sun warriors are loading -- please be patient </div>
                <span class= "sol-title-small"> Moon Warriors</span><br>
                <div class="moon-warriors" id="scmoons">Moon warriors are loading -- please be patient</div>
                <span class= "sol-title-small"> Apprentices</span><br>
                <div class="apprentices" id="solsticeclanapprentices">Apprentices are loading -- please be patient</div>
                <span class= "sol-title-small"> Kits</span><br>
                <div class="kits" id="sckits">Kits are loading -- please be patient </div>
                <span class= "sol-title-small"> Elders</span><br>
                <div class="elders" id="scelders">Elders are loading -- please be patient</div>
              </div>
            </div>
            <div id="archive" class="viewcharacters" style="display:none;">
              <br><br>
              <div id="archiveexplanation">This is SolsticeClan's archive. The archive is where we store characters that have been deleted or passed away.
                To view your archived characters simply click show Archive below and your characters will appear if you have
                any. Otherwise, this section will appear blank. If you would like to have your character re-added to the clan, you
                can do so by clicking the Re-add cat button under their description.
                <button id="solarchivebutton" onclick="toggleArchive()">Show Archive</button><br><br>
              </div>
              <div id="archivechars">
              </div>
            </div>
            <div id="ranks" class="viewcharacters" style="display:none;">
              <span class= "sol-title-small"> Priests</span> <br>
              <div id="priest-explain">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                quis nostrud exercitation
              </div>
              <br><br>
              <span class= "sol-title-small"> Sun Warriors</span> <br>
              <div id="sun-warriors-explain"><br>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                  quis nostrud exercitation
                </p>
              </div>
            <br><br>
            <span class= "sol-title-small"> Moon Warriors</span> <br>
            <div id="moon-warriors-explain">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
              quis nostrud exercitation
              anger.
            </div>
            <br><br>
            <span class= "sol-title-small"> Apprentices</span> <br>
            <div id="sol-apprentices-explain">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
              quis nostrud exercitation
            </div>
            <br><br>
            <span class= "sol-title-small"> Kits</span> <br>
            <div id="sol-kits-explain">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
              quis nostrud exercitation
            </div>
            <br><br>
            <span class= "sol-title-small">Elders</span> <br>
            <div id="sol-elders-explain">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
              quis nostrud exercitation
            </div>
            </div>
            <br><br>
            <div id="sol-statistics" class="viewcharacters" style="display:none;">
<iframe width="505" height="312" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vS0htng3ls6Tb7iRD-uGzHBvzxzj_FU-OPZNNFDatftQm6q2Z3m1ZNCZU-BjPa65u4kuVIwCptXMpkp/pubchart?oid=1927678201&amp;format=interactive"></iframe>        <br><br>
	    <br><br>
	<iframe width="505" height="312" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vS0htng3ls6Tb7iRD-uGzHBvzxzj_FU-OPZNNFDatftQm6q2Z3m1ZNCZU-BjPa65u4kuVIwCptXMpkp/pubchart?oid=41003786&amp;format=interactive"></iframe>
      <br><br>
    <iframe width="503" height="312" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vS0htng3ls6Tb7iRD-uGzHBvzxzj_FU-OPZNNFDatftQm6q2Z3m1ZNCZU-BjPa65u4kuVIwCptXMpkp/pubchart?oid=106899164&amp;format=interactive"></iframe>
 	<br><br>
		    <iframe width="505" height="312" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vS0htng3ls6Tb7iRD-uGzHBvzxzj_FU-OPZNNFDatftQm6q2Z3m1ZNCZU-BjPa65u4kuVIwCptXMpkp/pubchart?oid=929652635&amp;format=interactive"></iframe>
            </div>
          </div>
          <div class="character-sorting">
            <button id="sort" onclick="allsort()">
              <img class="sorting-img" alt="alphabetical sorting" src="https://i.imgur.com/WGjLUQM.png">
            </button>
            <button id="revsort" onclick="allrevsort()">
              <img class="sorting-img" alt="reverse alphabetical sorting" src="https://i.imgur.com/RscDBaG.png">
            </button>
            <button id="zodiacsort" onclick="sortallZodiac()">
              <img class="sorting-img" alt="sory by zodiac" src="https://i.imgur.com/2qNcJRm.png">
            </button>
            <button id="resetfilter" class="sorting-img" onclick="resetCats(cats)">
              <img class="sorting-img" alt="reset filters" src="https://images-ext-1.discordapp.net/external/BuaWIF-XdD9HK3lJ1c1Tif87039a2D4sacNIGtkXYYM/https/cdn-icons-png.flaticon.com/512/32/32418.png">
            </button>
          </div>
        </div>
        <br><br>
      </div><br><br>
    </div>
    <footer>
      <details>
        <summary>
          Layout Credits
        </summary>
        Layout design (c) Kristy Thompson<br>
        Layout coded by (c) Kristy Thompson & Jessica Teichman <br>
        Vector images (c) Kristy Thompson <br>
        Page Content (c) Sinister Haven <br>
        Character descriptions (c) Sinister Haven Roleplayers<br>
        Character images (c) original owners(ask rper for image credits)<br>
        Default images (c) unsplash.com
      </details>
    </footer>
  </div>
  </body>
  <script>
  //Script link and setting up the character array
const scriptURL = 'https://script.google.com/macros/s/AKfycbzsNEjjseObXABaBT4-6O8BTtUkMse-4KPY2XqCL4vpk8FaYBgMle5t4o3q4bRynybB/exec';
var chars = [];


//AJAX - helps to load characters faster
     form = document.forms["SolsticeClanJoining"];
      //Setting up locations for all of the character ranks
    const priest_location = document.getElementById("priest");
    const sun_location = document.getElementById("scsuns");
    const moon_location = document.getElementById("scmoons");
    const apps_location = document.getElementById("solsticeclanapprentices");
    const kits_location = document.getElementById("sckits");
    const elder_location = document.getElementById("scelders");
    const gallery_location = document.getElementById("scgallery");
    const thisclanname = "SolsticeClan";
  
window.onload = function () {
  $.ajax({
    crossOrigin: true,
    url: scriptURL,
    success: function(data) {
      getText(data);
      console.log('AJAX request completed successfully onload and information has been fetched from HG Database.')
    },
    dataType: 'text'
  });
}
	
	
// Create a Cat Object
function Cat(timestamp, name, rper, physical, traits, characterimage, rank, zodiac, status, parent1, parent2, bloodtype, power, hybrid, malady) {
    this.timestamp = timestamp,
    this.name = name,
    this.rper = rper,
    this.physical = physical,
    this.traits = traits,
    this.characterimage = characterimage,
    this.rank = rank,
    this.zodiac = zodiac,
    this.status = status,
    this.parent1 = parent1,
    this.parent2 = parent2,
    this.bloodtype = bloodtype,
    this.power = power,
    this.hybrid = hybrid,
    this.magicmalady = malady
}


//Function used to load characters
function loadARank(loc, current_rank, catlist) {
  loc.innerHTML = catfilter(catlist, current_rank);
}


//Function used to load characters to the gallery
function loadAGallery(loc, catlist) {
  loc.innerHTML = catgallery(catlist);
}


//This creates new Catf objects from the spreadsheet, and sends them to display on the page
function getText(cats) {
  cats = cats.split(',');
  for (i = 15; i < cats.length; i += 15) {
  chars.push(new Cat(cats[i], cats[i + 1], cats[i + 2], cats[i + 3], cats[i + 4], cats[i + 5], cats[i + 6], cats[i + 7], cats[i + 8], cats[i + 9], cats[i + 10], cats[i + 11], cats[i + 12], cats[i + 13], cats[i + 14]));
  }
    priest_chars = catfilterarray(chars, 'Priest');
    app_chars = catfilterarray(chars, 'Apprentice');
    sun_chars = catfilterarray(chars, 'Sun Warrior');
    moon_chars = catfilterarray(chars, 'Moon Warrior');
    kit_chars = catfilterarray(chars, 'Kit');
    elder_chars = catfilterarray(chars, 'Elder');
    gallery_chars = catfilterarray(chars, "")
    archive_chars = catfilterarray(chars, '', '', '', 'Archived');

      loadARank(priest_location, "Priest", priest_chars);
      loadARank(apps_location, "Apprentice", app_chars);
      loadARank(sun_location, "Sun Warrior", sun_chars);
      loadARank(moon_location, "Moon Warrior", moon_chars);
      loadARank(kits_location, "Kit", kit_chars);
      loadARank(elder_location, "Elder", elder_chars);
      loadAGallery(gallery_location, chars);

  countCats();
}


//This function tells the page how to display the cat objects
function catfilter(cha, r = "", user = "", zodiac = "", status = "") {
  l = "";
  tempchars = cha;
  cha = [];
  for (i = 0; i < tempchars.length; i++) {
    if (
      (tempchars[i].rper == user || user == "") &&
      (tempchars[i].rank == r || r == "") &&
      (tempchars[i].zodiac == zodiac || zodiac == "") &&
      (tempchars[i].status != "Archived")
    ) {
      l +=
        "<button onclick=\"displaycatonclick('" +
        tempchars[i].name +
        "')\" class='character-name-button' >" +
        tempchars[i].name +
        "</button>" +
        " rp'd by " +
        tempchars[i].rper +
        " - " +
        tempchars[i].bloodtype +
        "<br>" +
        tempchars[i].physical +
        "<br>" +
        tempchars[i].traits +
        "<br>Zodiac: " +
        tempchars[i].zodiac +
        "<br><br>";
      cha.push(tempchars[i]);
    } else if (status == "Archived" && tempchars[i].status == "Archived") {
      l +=
        "<button onclick=\"displaycatonclick('" +
        tempchars[i].charactername +
        "') class='character-name-button' >" +
        tempchars[i].name +
        "</button>" +
        " rp'd by " +
        tempchars[i].rper +
        " - " +
        tempchars[i].bloodtype +
        "<br>" +
        tempchars[i].physical +
        "<br>" +
        tempchars[i].traits +
        "<br>Zodiac: " +
        tempchars[i].zodiac +
        "<br><br>";
      cha.push(tempchars[i]);
    }
  }
  return l;
}


//This function
function catfilterarray(
  tempchars,
  r = "",
  user = "",
  zodiac = "",
  status = ""
) {
  l = [];
  char = [];
  for (i = 0; i < tempchars.length; i++) {
    if (
      (tempchars[i].rper == user || user == "") &&
      (tempchars[i].rank == r || r == "") &&
      (tempchars[i].zodiac == zodiac || zodiac == "") &&
      tempchars[i].status != "Archived" &&
      status != "Archived"
    ) {
      l +=
        tempchars[i].name +
        " rp'd by " +
        tempchars[i].rper +
        " - " +
        tempchars[i].bloodtype +
        "<br>" +
        tempchars[i].physical +
        "<br>" +
        tempchars[i].traits +
        "<br>Zodiac: " +
        tempchars[i].zodiac +
        "<br><br>";
      char.push(tempchars[i]);
    } else if (status == "Archived" && tempchars[i].status == "Archived") {
      l +=
        tempchars[i].name +
        " rp'd by " +
        tempchars[i].rper +
        " - " +
        tempchars[i].bloodtype +
        "<br>" +
        tempchars[i].physical +
        "<br>" +
        tempchars[i].traits +
        "<br>Zodiac: " +
        tempchars[i].zodiac +
        "<br><br>";
      char.push(tempchars[i]);
    }
  }
  return char;
}


//This function tells the page how to display cats in the gallery
function catgallery(cha, user = "", zodiac = "", status = "") {
  l = "";
  tempchars = cha;
  cha = [];
  for (i = 0; i < tempchars.length; i++) {
    if (tempchars[i].status == "Pending" && (status = "Pending")) {
      l +=
        "<div class= 'gallery-images' onclick=displaycatonclick('" +
        tempchars[i].name +
        "')  style='background-image:url(" +
        '"https://wallpaperaccess.com/full/3932353.jpg");' +
        "'></div>";
    } else if (
      (tempchars[i].rper == user || user == "") &&
      (tempchars[i].zodiac == zodiac || zodiac == "") &&
      tempchars[i].status != "Archived" &&
      status != "Archived"
    ) {
      l +=
        "<div class= 'gallery-images' onclick=displaycatonclick('" +
        tempchars[i].name +
        "')  style='background-image:url(" +
        tempchars[i].characterimage +
        ");'>" +
        "</div>";
    }
  }
  return l;
}


//Counting # of chars
function countCats() {
  $("priestcount").text(priest_chars.length);
  $("appcount").text(app_chars.length);
  $("mooncount").text(moon_chars.length);
  $("suncount").text(sun_chars.length);
  $("kitcount").text(kit_chars.length);
  $("eldercount").text(elder_chars.length);
  $("totalcount").text(chars.length);

  bloods = sumBloods();

  $("dcount").text(
    String(bloods[0]) +
      " cats - " +
      String(
        Math.round(
          (bloods[0] / (bloods[0] + bloods[1] + bloods[2] + bloods[3])) * 100
        )
      ) +
      "%"
  );
  $("ecount").text(
    String(bloods[1]) +
      " cats - " +
      String(
        Math.round(
          (bloods[1] / (bloods[0] + bloods[1] + bloods[2] + bloods[3])) * 100
        )
      ) +
      "%"
  );
  $("acount").text(
    String(bloods[2]) +
      " cats - " +
      String(
        Math.round(
          (bloods[2] / (bloods[0] + bloods[1] + bloods[2] + bloods[3])) * 100
        )
      ) +
      "%"
  );
  $("aacount").text(
    String(bloods[3]) +
      " cats - " +
      String(
        Math.round(
          (bloods[3] / (bloods[0] + bloods[1] + bloods[2] + bloods[3])) * 100
        )
      ) +
      "%"
  );
}

function sumBloods() {
  d = 0;
  e = 0;
  a = 0;
  aa = 0;

  for (i = 0; i < chars.length; i++) {
    switch (chars[i].bloodtype) {
      case "Diamond Blood":
        d += 1;
        break;

      case "Emerald Blood":
        e += 1;
        break;

      case "Amethyst Blood":
        a += 1;
        break;

      case "Amber Blood":
        aa += 1;
        break;
    }
  }

  return [d, e, a, aa];
}


//Sorting a->z and z->a
function sortRev(loc, chars, rank="", viewName="") {

chars.sort(function (x, y) {
    let a = x.name.toUpperCase();
        b = y.name.toUpperCase();
        return a == b ? 0 : a > b ? 1 : -1;
    });

chars.sort(function (x, y) {
    return x.name - y.name;
    }); 


if (viewName == "allegiances"){
        chars.reverse();
        loc.innerHTML = catfilter(chars, rank);
    }

else if (viewName == "gallery"){
        chars.reverse();
        loc.innerHTML = catgallery(chars, rank);
    }

else {
	console.log("help");
}

}




function alphabet(loc, chars, rank="", viewName="") {

    chars.sort(function (x, y) {
        let a = x.name.toUpperCase();
                b = y.name.toUpperCase();
            return a == b ? 0 : a > b ? 1 : -1;
    });

    chars.sort(function (x, y) {
            return x.name - y.name;
    });
 


 if (viewName == "allegiances"){
        loc.innerHTML = catfilter(chars, rank);
    }

else if (viewName == "gallery"){
        loc.innerHTML = catgallery(chars, rank);
    }

else {
	console.log("help");
}



    
}

	 
function allsort() {

	alphabet(priest_location, priest_chars, "Priest", "allegiances");
	alphabet(apps_location, app_chars, "Apprentice", "allegiances");
	alphabet(sun_location, sun_chars, "Sun Warrior", "allegiances");
	alphabet(moon_location, moon_chars, "Moon Warrior", "allegiances");
	alphabet(kits_location, kit_chars, "Kit", "allegiances");
	alphabet(elder_location, elder_chars, "Elder", "allegiances");
	alphabet(gallery_location, chars, "", "gallery");

};

function allrevsort() {
	sortRev(priest_location, priest_chars, "Priest", "allegiances");
	sortRev( apps_location, app_chars, "Apprentice", "allegiances");
	sortRev(sun_location, sun_chars, "Sun Warrior", "allegiances");
	sortRev( moon_location, moon_chars, "Moon Warrior", "allegiances");
	sortRev( kits_location, kit_chars, "Kit", "allegiances");
	sortRev(elder_location, elder_chars, "Elder", "allegiances");
	sortRev(gallery_location, chars, "", "gallery");
};

	  
	  

//Sorting by Zodiac Signs
function sortZodiac(loc, chars, rank, viewName) {
  chars.sort(function (x, y) {
    let a = x.zodiac.toUpperCase();
    b = y.zodiac.toUpperCase();
    return a == b ? 0 : a > b ? 1 : -1;
  });
  chars.sort(function (x, y) {
    return x.zodiac - y.zodiac;
  });
  if (viewName == "allegiances") {
    loc.innerHTML = catfilter(chars, rank);
  } else if (viewName == "gallery") {
    loc.innerHTML = catgallery(chars, rank);
  } else {
    console.log("help");
  }
}

function sortallZodiac() {
  sortZodiac(priest_location, priest_chars, "Priest", "allegiances");
  sortZodiac(apps_location, app_chars, "Apprentice", "allegiances");
  sortZodiac(sun_location, sun_chars, "Sun Warrior", "allegiances");
  sortZodiac(moon_location, moon_chars, "Moon Warrior", "allegiances");
  sortZodiac(kits_location, kit_chars, "Kit", "allegiances");
  sortZodiac(elder_location, elder_chars, "Elder", "allegiances");
  sortZodiac(gallery_location, chars, "", "gallery");
}

//flags this character as pending
function flagStatus() {
  for (i = 0; i < chars.length; i++) {
    console.log("hello world");
    if (chars[i].status.toLowerCase() == "pending") {
      chars[i].name = "<pending>" + chars[i].name + "</pending>";
      chars[i].characterimage =
        "https://images.unsplash.com/photo-1511044568932-338cba0ad803?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80";
    }
  }
}


//Joining Form- Submit a Character
form = document.forms["SolsticeClanJoining"];
form.addEventListener("submit", (e) => {
  e.preventDefault();
  const bt = callme();
  document.getElementById("blood1type").value = bt;
  fetch(scriptURL, {
    method: "POST",
    body: new FormData(form),
    mode: "no-cors"
  })
    .then((response) =>
      alert(
        "Character submitted! \n \n Your character's blood type is " +
          bt +
          " ^^",
        response
      )
    )
    .catch((error) => alert("Error!", error.message));
});


// Username Search
function submituser() {
  var user = document.getElementById("username1").value;

  priest_chars = catfilterarray(priest_chars, "Priest", user);
  priest_location.innerHTML = catfilter(priest_chars, "Priest");

  app_chars = catfilterarray(app_chars, "Apprentice", user);
  apps_location.innerHTML = catfilter(app_chars, "Apprentice");

  kit_chars = catfilterarray(kit_chars, "Kit", user);
  kits_location.innerHTML = catfilter(kit_chars, "Kit");

  sun_chars = catfilterarray(sun_chars, "Sun Warrior", user);
  sun_location.innerHTML = catfilter(sun_chars, "Sun Warrior");

  moon_chars = catfilterarray(moon_chars, "Moon Warrior", user);
  moon_location.innerHTML = catfilter(moon_chars, "Moon Warrior");

  elder_chars = catfilterarray(elder_chars, "Elder", user);
  elder_location.innerHTML = catfilter(elder_chars, "Elder");

  gallery_chars = catfilterarray(chars, "", user);
  gallery_location.innerHTML = catgallery(gallery_chars, "");
}


// Reset all sort/filters
function resetCats(cats) {
	cats = cats.split(',');
	chars = [];
	
	for (i=15;i<cats.length;i+=15) {
		chars.push(new Cat(cats[i], cats[i+1],cats[i+2],cats[i+3],cats[i+4],cats[i+5],cats[i+6],cats[i+7], cats[i+8],cats[i+9],cats[i+10], cats[i+11], cats[i+12], cats[i+13], cats[i+14]));
	}

	priest_chars = catfilterarray(chars, 'Priest');
	app_chars = catfilterarray(chars, 'Apprentice');
	sun_chars = catfilterarray(chars, 'Sun Warrior');
	moon_chars = catfilterarray(chars, 'Moon Warrior');
	kit_chars = catfilterarray(chars, 'Kit');
	elder_chars = catfilterarray(chars, 'Elder');
	archive_chars = catfilterarray(chars, '', '', '', status="Archived");


	loadARank(priest_location, "Priest", priest_chars);
	loadARank(apps_location, "Apprentice", app_chars);
	loadARank(sun_location, "Sun Warrior", sun_chars);
	loadARank(moon_location, "Moon Warrior", moon_chars);
	loadARank(kits_location, "Kit", kit_chars);
	loadARank(elder_location, "Elder", elder_chars);
	loadAGallery(gallery_location, chars);

}


  

//Character Archive
var yourcats = [];

function showArchive() {
  document.getElementById("archiveexplanation").style.display = "none";

  for (i = 0; i < archive_chars.length; i++) {
    if (archive_chars[i].rper) { // on the production page, this if would check if the archived characters belong to the viewing user, but for this demo you can see all archived characters
      yourcats.push(archive_chars[i]);
    }
  }
  for (i = 0; i < yourcats.length; i++) {
    document.getElementById("archivechars").innerHTML +=
      yourcats[i].name +
      " rp'd by " +
      yourcats[i].rper +
      " - " +
      yourcats[i].bloodtype +
      "<br>" +
      yourcats[i].physical +
      "<br>" +
      yourcats[i].traits +
      "<br>Zodiac: " +
      yourcats[i].zodiac +
      "<br><br>";
    document.getElementById("archivechars").innerHTML +=
      "<button onclick=\"reviveCharacter('" +
      String(yourcats[i].name) +
      "' )\"> Re-Add Cat </button>" +
      "<br><br>";
  }

  
  // hide current cats and show the archived cats
  document.getElementById("archivechars").style.display = "block";
  document.getElementById("archivechars").style.margin = "0px 0px 0px 0px";
}


function hideArchive() {
  document.getElementById("archivechars").style.display = "none";
}

var archive = false;

function toggleArchive() {
  if (archive == false) {
    showArchive();
    archive = true;
  } else {
    archive = false;
    hideArchive();
  }
}


// Blood Types Calculator 
const diamondParent = [15, 45, 75, 1.3];
const emeraldParent = [15, 35, 85, 0.99];
const amethystParent = [15, 70, 95, 1.05];
const amberParent = [45, 70, 85, 0.95];
const unknownParent = [25, 50, 75, 1];

var random;
var max;
var max = 99;

function callme() {
  parentOne = document.getElementById("parentOne").value;
  parentTwo = document.getElementById("parentTwo").value;

  function randomRoll() {
    random = Math.floor(Math.random() * max);
    return random;
  }

  function parentBlood(parentOne) {
    if (parentOne == "Diamond") {
      return diamondParent;
    } else if (parentOne == "Emerald") {
      return emeraldParent;
    } else if (parentOne == "Amethyst") {
      return amethystParent;
    } else if (parentOne == "Amber") {
      return amberParent;
    } else {
      return unknownParent;
    }
  }

  function parentBlood2(parentTwo) {
    if (parentTwo == "Diamond") {
      return diamondParent;
    } else if (parentTwo == "Emerald") {
      return emeraldParent;
    } else if (parentTwo == "Amethyst") {
      return amethystParent;
    } else if (parentTwo == "Amber") {
      return amberParent;
    } else {
      return unknownParent;
    }
  }

  y = randomRoll() * parentBlood(parentOne)[3] * parentBlood2(parentTwo)[3];

  function bloodType(y, parentOne, parentTwo) {
    if (y < (parentOne[0] + parentTwo[0]) / 2) {
      return "Amber Blood";
    } else if (y < (parentOne[1] + parentTwo[1]) / 2) {
      return "Amethyst Blood";
    } else if (y < (parentOne[2] + parentTwo[2]) / 2) {
      return "Emerald Blood";
    } else {
      return "Diamond Blood";
    }
  }

  const bloodtype = bloodType(
    y,
    parentBlood(parentOne),
    parentBlood(parentTwo)
  );

  return bloodtype;
}
  

//tabs	  
function openView(evt, viewName) {
  var i, tabcontent, viewlinks;
  viewcharacters =  document.getElementsByClassName("viewcharacters");
  for (i = 0; i < viewcharacters.length; i++) {
    viewcharacters [i].style.display = "none";
  }
  viewlinks = document.getElementsByClassName("viewlinks");
  for (i = 0; i < viewlinks.length; i++) {
    viewlinks[i].className = viewlinks[i].className.replace(" active", "");
  }
  document.getElementById(viewName).style.display = "block";
  evt.currentTarget.className += " active";

if (viewName == "archive" || viewName == "sol-statistics"){
	document.getElementById('filter').style.display = "none";
	document.getElementById('username1').style.display = "none";
}

if (viewName == "allegiances" || viewName == "gallery"){
	document.getElementById('filter').style.display = "block";
	document.getElementById('username1').style.display = "block";
}

}



//Display more  character information on click
function displaycatonclick(solscharactername) {
  for (i = 0; i < chars.length; i++) {
    if (
      chars[i].name.includes(solscharactername) &&
      chars[i].status == "Pending"
    ) {
      document.getElementById("current-character-name").innerHTML =
        chars[i].name;
      document.getElementById("current-character-bio").innerHTML =
        chars[i].physical;
      document.getElementById("current-character-traits").innerHTML =
        chars[i].traits;
      document.getElementById("current-character-username").innerHTML =
        chars[i].rper;
      document.getElementById("current-character-rank").innerHTML =
        chars[i].rank;
      document.getElementById("current-character-bloodtype").innerHTML =
        chars[i].bloodtype;
      document.getElementById("current-character-powers").innerHTML =
        chars[i].power;
      document.getElementById(
        "current-character"
      ).style.cssText += `background-image:url("https://wallpaperaccess.com/full/3932353.jpg")`;
    } else if (chars[i].name.includes(solscharactername)) {
      let currentimage = chars[i].characterimage;
      document.getElementById("current-character-name").innerHTML =
        chars[i].name;
      document.getElementById("current-character-bio").innerHTML =
        chars[i].physical;
      document.getElementById("current-character-traits").innerHTML =
        chars[i].traits;
      document.getElementById("current-character-username").innerHTML =
        chars[i].rper;
      document.getElementById("current-character-rank").innerHTML =
        chars[i].rank;
      document.getElementById("current-character-bloodtype").innerHTML =
        chars[i].bloodtype;
      document.getElementById("current-character-powers").innerHTML =
        chars[i].power;
      document.getElementById(
        "current-character"
      ).style.cssText += `background-image:url(${currentimage})`;
    }
  }
}

function openInNewTab(url) {
  window.open(url, "_blank").focus();
}    
</script>
</html>



